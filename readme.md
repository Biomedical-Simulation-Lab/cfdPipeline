# Old CFD Pipeline Usage:
This is meant to be a highly condensed documentation on how the BSL groups current CFD pipeline works and the data inputs it expects.

# Volume Meshes
The pipeline expects a tagged XML mesh. 

A XML mesh has the following structure:

	<?xml version="1.0"?>
	<dolfin xmlns:dolfin="http://www.fenicsproject.org">
	  <mesh celltype="tetrahedron" dim="3">
	    <vertices size="258931">
	      <vertex index="0" x="2.63046" y="2.72378" z="41.4504" />
	      <vertex index="1" x="2.76352" y="2.93123" z="41.2911" />
	      <vertex index="2" x="2.55154" y="2.74947" z="41.1775" />
	      ...
	      ...
	      ...
	    </vertices>
	    <cells size="1522040">
	      <tetrahedron index="0" v0="2" v1="25139" v2="25140" v3="25141" />
	      <tetrahedron index="1" v0="1" v1="2" v2="25139" v3="25140" />
	      <tetrahedron index="2" v0="0" v1="1" v2="2" v3="25139" />
	      <tetrahedron index="3" v0="5" v1="25142" v2="25143" v3="25144" />
	      .....
	      .....
	      .....
	    </cells>
	    <domains>
	      <mesh_value_collection type="uint" dim="2" size="51832">
	        <value cell_index="2" local_entity="3" value="0" />
	        <value cell_index="5" local_entity="3" value="0" />
	        <value cell_index="8" local_entity="3" value="0" />
	        ...
	        ...
	        ...
	        <value cell_index="738811" local_entity="3" value="4" />
	        <value cell_index="639209" local_entity="3" value="3" />
	        <value cell_index="1106271" local_entity="3" value="2" />
	        ...
	        ...
	        ...
	      </mesh_value_collection>
	    </domains>
	  </mesh>
	</dolfin>


This file is generated by meshing the segmentations. The verticies represnet the points in space that the governing equations are solved over.

The cells represent the connectivity of all vertiices to understand how to assemble the system of eqations, and for interpolating the point wise results. 

The domains are used for assigning boundary conditions by tagging cells of the mesh with a specific value so the proper boundary conditions can be assigined.

# Info Files

The info file is used to specify the boundary conditions. The domains deffined on the volume mesh are used here as the ID to identify where to perscribe the boundary conditions. The info file in this repository has a description of what each element does.

# Running a job on scinet

all you have to to to run this sample job on scinet is run the following commands from a logged in terminal:

`cd $SCRATCH`

`git clone https://gitlab.com/ramen_newdals/oldCFDPipeline.git`

`cd oldCFDPipeline`

`sh p314_edited_cl_pr.sh`